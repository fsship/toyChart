!function(){"use strict";function t(){for(var t="0123456789ABCDEF".split(""),i="#",s=0;6>s;s++)i+=t[Math.floor(16*Math.random())];return i}function i(t){this.canvasElement=document.createElement("canvas"),document.querySelector(t).appendChild(this.canvasElement),t=document.querySelector(t),this.width=t.scrollWidth,this.height=t.scrollHeight,this.canvasElement.setAttribute("width",t.scrollWidth+"px"),this.canvasElement.setAttribute("height",t.scrollHeight+"px"),this.ctx=this.canvasElement.getContext("2d"),this.axisX={},this.axisY={},this.axisY.maxVal=0,this.axisX.splitCount=0}i.prototype.__setAxis=function(t){this.ctx.fillRect(0,this.height-40,this.width,5),this.ctx.fillRect(10,10,5,this.height);for(var i=0,s=0;s<t.length;s++)t[s].value>i&&(i=t[s].value);for(this.axisY.maxVal=i,this.axisY.maxValPosition=15,this.axisY.zeroValPosition=this.height-40,this.axisX.splitCount=t.length,this.perAreaWidth=(this.width-13)/this.axisX.splitCount,s=0;s<this.axisX.splitCount;s++)this.ctx.fillText(t[s].text,this.perAreaWidth/2+s*this.perAreaWidth,this.height-20,this.perAreaWidth)},i.prototype.__caculateStartPoint=function(t){var i=1-t/this.axisY.maxVal,s=this.axisY.zeroValPosition-this.axisY.maxValPosition;return this.axisY.maxValPosition+s*i},i.prototype.__drawBar=function(i){this.__setAxis(i),console.log(this.axisX.splitCount);for(var s=0;s<this.axisX.splitCount;s++){var e=this.__caculateStartPoint(i[s].value);console.log(e),this.ctx.fillStyle=t(),this.ctx.fillRect(18+s*this.perAreaWidth,e,this.perAreaWidth,this.axisY.zeroValPosition-e)}},i.prototype.__drawLine=function(i){this.__setAxis(i),this.ctx.fillStyle=t(),this.ctx.beginPath();for(var s=0;s<this.axisX.splitCount;s++){var e=this.__caculateStartPoint(i[s].value);0===s?this.ctx.moveTo(this.perAreaWidth/2+s*this.perAreaWidth,e):this.ctx.lineTo(this.perAreaWidth/2+s*this.perAreaWidth,e)}this.ctx.stroke(),this.ctx.closePath()},i.prototype.__drawPie=function(i){this.ctx.translate(this.width/2,this.height/2);var s=.4*this.height,e=i.map(function(t){return t.value}).reduce(function(t,i){return t+i});console.log(e);for(var h=.5*-Math.PI,a=0;a<i.length;a++){this.ctx.fillStyle=t(),this.ctx.beginPath(),this.ctx.moveTo(0,0);var r=h+2*Math.PI*i[a].value/e,o=(r+h)/2;this.ctx.arc(0,0,s,h,r),h=r,console.log(r),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillText(i[a].text,(s+10)*Math.cos(o),(s+10)*Math.sin(o))}},i.prototype.draw=function(t){switch(this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#000000",t.type){case"bar":this.__drawBar(t.data);break;case"line":this.__drawLine(t.data);break;case"pie":this.__drawPie(t.data);break;default:throw new Error("No such chart type: "+t.type)}},window.Chart=i}();